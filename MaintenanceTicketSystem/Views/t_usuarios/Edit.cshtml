@model MaintenanceTicketSystem.Models.t_usuarios

@{
    ViewBag.Title = "Edit";
}

<h2>Editar</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>Usuario</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.usuario)

        <div class="form-group">
            @Html.LabelFor(model => model.usuario, "Usuario (Windows)", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
               @Model.usuario
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.no_emp, "No. de empleado", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.no_emp, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.no_emp, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.nombre, "Nombre", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.nombre, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.nombre, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.email, "Email", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.email, "Email", new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.puesto, "Puesto", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.puesto, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.puesto, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.turno, "Turno", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.turno, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.turno, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.depto_tress, "Departamento Usuario", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.depto_tress, new { htmlAttributes = new { @class = "form-control"} })
                @Html.ValidationMessageFor(model => model.depto_tress, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.supervisor, "Supervisor", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.supervisor, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.supervisor, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.rol, "Rol", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("rol", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.rol, "", new { @class = "text-danger" })
            </div>
        </div>

        <div id="divcat2" class="form-group">
            @Html.LabelFor(model => model.depto, "Departamento", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("depto", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.depto, "", new { @class = "text-danger" })
            </div>
        </div>

        <div id="divcat" class="form-group">
            @Html.LabelFor(model => model.categoria, "Categoría", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("categoria", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.categoria, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group col-md-12">
                <input type="submit" value="Actualizar" class="btn btn-outline-primary" />
        </div>
    </div>
}

<div>
    @Html.ActionLink("Regresar a lista", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script>
    $(document).ready(function () {
        $('#divcat').hide();
        $('#divcat2').hide();

          @if (Model.depto!= null)
        {
            <text>
        $("#divcat2").show();
            </text>
            if(Model.categoria != null)
            {
                <text>
       $("#divcat").show();
                </text>
            }

        }

    });

    $("#rol").change(function () {
        if ($("#rol").val() == "Supervisor" || $("#rol").val() == "Admin") {
            if ($("#depto").val() == "MAN") {
                $("#divcat").show();
            }
            $("#divcat2").show();
        }
        else {
            $("#divcat2").hide();
            $("#divcat").hide();
        }

    });

    $("#depto").change(function () {
        if ($("#depto").val() == "MAN")
            $("#divcat").show();
        else
            $("#divcat").hide();
    });

  
</script>
